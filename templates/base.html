{% load static %}
<!DOCTYPE html>
<html lang="es" style="scroll-behavior: smooth;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block titulo_pagina %}Comunidad ChugChillian{% endblock %}</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Estilos generales -->
    <link rel="stylesheet" href="{% static 'general/css/generales/generales.css' %}">
    {% block css_archivos %}{% endblock %}
</head>

<body style="font-family: 'Quicksand', sans-serif; background-color: #fdfbf7;">

<!-- ======================
     CABECERA / NAVBAR
====================== -->
<header class="shadow-sm sticky-top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-brown py-3" style="background-color:#8B5E3C;">
    <div class="container d-flex align-items-center justify-content-between">
      <!-- LOGO -->
      <a class="navbar-brand d-flex align-items-center fw-bold fs-5 text-uppercase" href="{% url 'inicio' %}">
        <img src="{% static 'general/images/general/logo.png' %}" alt="Logo ChugChillian"
             class="me-2" style="height: 42px;">
        Comunidad ChugChillian
      </a>

      <!-- BOT√ìN M√ìVIL -->
      <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Men√∫ de navegaci√≥n">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- ENLACES -->
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav align-items-center gap-3">
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'inicio' %}">
              Inicio
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if 'cursos' in request.path %}active{% endif %}" href="{% url 'cursos' %}">
              Cursos
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if 'contacto' in request.path %}active{% endif %}" href="{% url 'contacto' %}">
              Contacto
            </a>
          </li>
          <li class="nav-item ms-lg-3">
            <a href="{% url 'login' %}" class="btn btn-outline-warning fw-semibold px-4 py-2 rounded-pill">
              <i class="bi bi-person-circle me-1"></i> Iniciar Sesi√≥n
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<!-- ======================
     CONTENIDO PRINCIPAL
====================== -->
<main class="container mt-4">
  {% block contenido_pagina %}
  {% endblock %}
</main>

<!-- ======================
     PIE DE P√ÅGINA
====================== -->
<footer class="text-white pt-5 pb-4 mt-5" style="background-color:#3E2C22;">
  <div class="container">
    <div class="row gy-4">

      <div class="col-lg-4 col-md-6">
        <h4 class="fw-bold mb-3">Comunidad ChugChillian</h4>
        <p>Fortaleciendo la educaci√≥n, cultura y sabidur√≠a ancestral en armon√≠a con la tierra.</p>
        <p class="fst-italic">‚ÄúDonde florece la ense√±anza, crece la comunidad.‚Äù</p>
      </div>

      <div class="col-lg-4 col-md-6">
        <h5 class="fw-semibold mb-3">Enlaces R√°pidos</h5>
        <ul class="list-unstyled">
          <li><a href="{% url 'inicio' %}" class="text-white text-decoration-none">Inicio</a></li>
          <li><a href="{% url 'cursos' %}" class="text-white text-decoration-none">Cursos</a></li>
          <li><a href="{% url 'contacto' %}" class="text-white text-decoration-none">Contacto</a></li>
        </ul>
      </div>

      <div class="col-lg-4 col-md-12">
        <h5 class="fw-semibold mb-3">Contacto</h5>
        <ul class="list-unstyled">
          <li><i class="bi bi-geo-alt-fill me-2"></i>Chugchill√°n, Cotopaxi - Ecuador</li>
          <li><i class="bi bi-envelope-fill me-2"></i><a href="mailto:contacto@chugchillian.org" class="text-white text-decoration-none">contacto@chugchillian.org</a></li>
          <li><i class="bi bi-telephone-fill me-2"></i>+593 98 765 4321</li>
        </ul>
      </div>
    </div>

    <hr class="my-4" style="border-color: rgba(255,255,255,0.2);">

    <div class="text-center">
      &copy; 2025 Comunidad ChugChillian ‚Äî Inspirando Educaci√≥n, Cultura y Vida Ancestral.
    </div>
  </div>
</footer>


<!-- ======================
     CHATBOT CHUGCHILLIAN
====================== -->
<div id="chatbot" style="position: fixed; bottom: 20px; right: 20px; background: white; width: 320px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); display: none; flex-direction: column; font-family: 'Quicksand', sans-serif; z-index: 9999;">
  <div style="background:#8B5E3C; color:#fff; padding:10px; text-align:center; font-weight:bold;">
    Asistente ChugChillian üí¨
  </div>
  <div id="chat-messages" style="padding:10px; height:240px; overflow-y:auto; font-size:14px;"></div>
  <div style="display:flex; border-top:1px solid #ddd;">
    <input id="chat-input" type="text" placeholder="Escribe tu pregunta..." style="flex:1; border:none; padding:8px; outline:none;">
    <button id="chat-send" style="background:#D4A373; color:#fff; border:none; padding:0 15px; cursor:pointer;">‚û§</button>
  </div>
</div>

<button id="chat-toggle" style="position: fixed; bottom: 25px; right: 25px; background: #8B5E3C; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 24px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 9999;">üí¨</button>

<script>
const chatToggle = document.getElementById("chat-toggle");
const chatBox = document.getElementById("chatbot");
const sendBtn = document.getElementById("chat-send");
const input = document.getElementById("chat-input");
const messages = document.getElementById("chat-messages");

chatToggle.onclick = () => chatBox.style.display = chatBox.style.display === "flex" ? "none" : "flex";

async function sendMessage() {
  const text = input.value.trim();
  if (!text) return;
  messages.innerHTML += `<div><b>T√∫:</b> ${text}</div>`;
  input.value = "";

  const res = await fetch("/api/chat/", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: text })
  });

  const data = await res.json();
  messages.innerHTML += `<div><b>Bot:</b> ${data.reply || "Error al obtener respuesta."}</div>`;
  messages.scrollTop = messages.scrollHeight;
}

sendBtn.onclick = sendMessage;
input.addEventListener("keypress", e => e.key === "Enter" ? sendMessage() : null);
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
